# n8n 설치 및 운영 가이드

이 문서는 현재 시스템에 설치된 n8n 인스턴스의 설치 과정, 운영 방법 및 주요 설정에 대해 설명합니다.

---

## 1. 설치 개요
- **설치 경로**: `C:\n8n\n8n-instance`
- **설치 버전**: n8n v2.3.5 (최신 안정 버전)
- **실행 방식**: PM2 (Process Manager 2)를 통한 백그라운드 실행
- **접속 주소**: [http://localhost:5678](http://localhost:5678)

---

## 2. 설치 과정 요약
1. **환경 준비**: Node.js v22 환경에서 진행되었습니다.
2. **PM2 설치**: 전역으로 PM2를 설치하여 프로세스 관리를 자동화했습니다.
   ```bash
   npm install -g pm2
   ```
3. **인스턴스 생성**: 모노레포 소스와의 충돌을 피하기 위해 별도의 `n8n-instance` 디렉토리를 생성하고 n8n 패키지를 설치했습니다.
   ```bash
   mkdir n8n-instance
   cd n8n-instance
   npm init -y
   npm install n8n
   ```
4. **서비스 시작**: PM2를 사용하여 서비스를 등록하고 시작했습니다.
   ```bash
   pm2 start node_modules/n8n/bin/n8n --name n8n-instance
   ```

---

## 3. 주요 운영 명령어 (PM2)
n8n 서비스 상태를 관리하기 위해 다음 명령어를 터미널에서 사용할 수 있습니다.

| 작업 | 명령어 |
| :--- | :--- |
| **상태 확인** | `pm2 status` |
| **실시간 로그** | `pm2 logs n8n-instance` |
| **서비스 중지** | `pm2 stop n8n-instance` |
| **서비스 재시작** | `pm2 restart n8n-instance` |
| **현재 상태 저장** | `pm2 save` |

---

## 4. Windows 재부팅 시 자동 실행 설정 (GUI 도구)
Windows 환경에서는 PM2가 기본적으로 재부팅 시 자동 실행되지 않습니다. 제공된 GUI 도구를 사용하면 편리하게 설정할 수 있습니다.

### 🛠️ PM2 관리자 도구 사용법
`C:\n8n` 폴더에 있는 **`run-pm2-manager.vbs`** 파일을 더블 클릭하여 실행합니다. (검은색 콘솔 창 없이 GUI가 바로 실행됩니다.)

1. **자동 실행 등록 (Register)**:
   - 클릭 시 `pm2-windows-startup` 패키지를 설치하고, 현재 실행 중인 n8n 인스턴스를 윈도우 시작 프로그램에 등록합니다.
   - 내부적으로 `pm2 save`를 수행하여 현재 상태를 저장합니다.
2. **자동 실행 해제 (Unregister)**:
   - 등록된 스타트업 설정을 삭제하여 재부팅 시 자동 실행되지 않도록 합니다.
3. **현재 PM2 상태 확인**:
   - 현재 실행 중인 n8n 인스턴스의 상태(상태, 메모리, 업타임 등)를 표 형식으로 깨끗하게 확인합니다.

> **참고**: 권한 문제로 설정이 적용되지 않을 경우, `run-pm2-manager.vbs` 파일을 마우스 오른쪽 버튼으로 클릭하여 **'관리자 권한으로 실행'** 하십시오.

---

## 5. 사용자 팁 및 주의사항

### 💡 초기 설정
- 처음 접속 시 관리자 계정(이메일/비밀번호)을 생성해야 합니다.
- 데이터베이스는 기본적으로 SQLite를 사용하며, 데이터는 사용자 폴더의 `.n8n` 디렉토리에 저장됩니다.

### 🐍 Python Task Runner 관련
- 현재 시스템에 Python 3가 설치되어 있지 않아 Python 관련 노드 실행 시 제한이 있을 수 있습니다. Python 노드를 사용하려면 Python 3 설치 후 n8n을 재시작하십시오.

### 🔗 외부 접속 설정 (필요 시)
- 외부에서 접속하거나 Webhook을 사용하려면 환경 변수(`N8N_HOST`, `WEBHOOK_URL` 등) 설정이 필요할 수 있습니다.
- PM2 설정 파일(`ecosystem.config.js`)을 생성하여 환경 변수를 체계적으로 관리하는 것을 권장합니다.

---

## 5. 문제 해결
- **포트 충돌**: 만약 5678 포트가 이미 사용 중이라면 n8n이 시작되지 않습니다. `N8N_PORT` 환경 변수로 포트를 변경할 수 있습니다.
- **로그 확인**: 실행 중 오류가 발생하면 `pm2 logs n8n-instance --lines 100` 명령어로 상세 오류 내용을 확인하십시오.

---
*작성일: 2026-01-15*
